# Переменные окружения

В этом документе описаны все переменные окружения, используемые в проекте Farm.

## Общие переменные

### SERVER_PORT
- **Назначение**: Порт, на котором запускается сервер
- **По умолчанию**: Не задан (используется сокет)

### FARM_WORKDIR
- **Назначение**: Рабочая директория приложения
- **По умолчанию**: `/farm`

## Переменные базы данных

### FARM_DB_TYPE
- **Назначение**: Тип базы данных
- **Значения**: `sqlite` или `postgres`
- **По умолчанию**: `sqlite`

### FARM_DB_FILE_PATH
- **Назначение**: Путь к файлу базы данных SQLite (используется только при `FARM_DB_TYPE=sqlite`)
- **По умолчанию**: `farm.db` в корневой директории проекта

### FARM_DB_HOST
- **Назначение**: Хост PostgreSQL сервера (используется только при `FARM_DB_TYPE=postgres`)
- **По умолчанию**: `localhost`

### FARM_DB_PORT
- **Назначение**: Порт PostgreSQL сервера (используется только при `FARM_DB_TYPE=postgres`)
- **По умолчанию**: `5432`

### FARM_DB_USER
- **Назначение**: Имя пользователя PostgreSQL (используется только при `FARM_DB_TYPE=postgres`)
- **По умолчанию**: `postgres`

### FARM_DB_PASSWORD
- **Назначение**: Пароль пользователя PostgreSQL (используется только при `FARM_DB_TYPE=postgres`)
- **По умолчанию**: `postgres`

### FARM_DB_NAME
- **Назначение**: Имя базы данных PostgreSQL (используется только при `FARM_DB_TYPE=postgres`)
- **По умолчанию**: `farm`

## Конфигурация

### FARM_ENV_PATH
- **Назначение**: Путь к внешнему конфигурационному файлу
- **По умолчанию**: Не задан

### NO_AUTH
- **Назначение**: Отключает аутентификацию
- **Значения**: `true` или `false`
- **По умолчанию**: `false`

### UI_PORT
- **Назначение**: Порт для UI интерфейса
- **По умолчанию**: Не задан

## Docker-специфичные переменные

### DOCKER_PROXY_HOST
- **Назначение**: Хост Docker proxy
- **По умолчанию**: `127.0.0.1`

### DOCKER_PROXY_PORT
- **Назначение**: Порт Docker proxy
- **По умолчанию**: `3004`

### FARM_DEPLOYMENT_MODE (на уровне приложения)
- **Назначение**: Режим развертывания
- **Значения**: `vm` или `docker_container`
- **По умолчанию**: Не задан

### DOCKER_AUTH_CONFIG_FILE_PATH
- **Назначение**: Путь к конфигурационному файлу Docker
- **По умолчанию**: `~/.docker/config.json`

## Git-специфичные переменные

### GIT_REPOSITORY_TOKEN
- **Назначение**: Токен для доступа к Git репозиторию
- **По умолчанию**: Не задан

Также поддерживаются произвольные переменные окружения для токенов по имени провайдера.

## Farm Docker container Entrypoint

### FARM_DEPLOYMENT_MODE
- **Назначение**: Режим развертывания Farm
- **Значения**: `vm` или `docker_container`
- **По умолчанию**: `docker_container`

### DOCKER_NETWORK
- **Назначение**: Имя Docker сети для контейнеров Farm
- **По умолчанию**: `farm`

### DOCKER_NETWORK_IPV6
- **Назначение**: Включает поддержку IPv6 для Docker сети
- **Значения**: `true` или `false`
- **По умолчанию**: `true`

### DOCKER_NETWORK_SUBNET
- **Назначение**: Подсеть для Docker сети (IPv6)
- **По умолчанию**: `ad00::/8`

### DOCKER_FIXED_CIDR_V6
- **Назначение**: Фиксированный CIDR для IPv6
- **По умолчанию**: `fc00::/8`

### DOCKER_NETWORK_FLAGS
- **Назначение**: Флаги для создания Docker сети
- **По умолчанию**: `--driver=bridge --ipv6 --subnet=$DOCKER_NETWORK_SUBNET` (если включен IPv6)

### DOCKER_PROXY_CONTAINER
- **Назначение**: Имя контейнера Docker proxy
- **По умолчанию**: `farm-docker-proxy`

### DOCKER_PROXY_NGINX_TAG
- **Назначение**: Тег образа nginx для proxy
- **По умолчанию**: `latest`

### DOCKER_PROXY_PORT
- **Назначение**: Порт Docker proxy
- **По умолчанию**: `3004`

### DOCKER_PROXY_NGINX_CONF_SRC
- **Назначение**: Путь к конфигу nginx для proxy
- **По умолчанию**: `/opt/nginx/docker-proxy.conf`

### DOCKER_RUNNING_CHECK_INTERVAL
- **Назначение**: Интервал проверки запуска Docker (в секундах)
- **По умолчанию**: `3`

### DOCKER_REGISTRY
- **Назначение**: Реестр Docker
- **По умолчанию**: `ghcr.io`

### DOCKER_LOGIN
- **Назначение**: Логин для Docker registry
- **По умолчанию**: Не задан

### DOCKER_PWD
- **Назначение**: Пароль для Docker registry
- **По умолчанию**: Не задан

### DOCKER_NETWORK_IPV6_DNS_ADDRESS
- **Назначение**: Адрес DNS для IPv6 сети
- **По умолчанию**: Не задан (обязателен при включенном IPv6)
